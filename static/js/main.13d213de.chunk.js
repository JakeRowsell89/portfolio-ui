(this["webpackJsonpportfolio-ui"]=this["webpackJsonpportfolio-ui"]||[]).push([[0],{19:function(e,t,a){e.exports=a(43)},24:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(16),o=a.n(r),l=(a(24),a(4)),u=a(6),i=a(1),s=a(17),m=a.n(s),v=a(18),p=["#F87AFF","#AB1DE0","#8718F5","#4E16E0","#4940FF","#7B91FF","#3D1DE0","#8718F5","#BE0BE0","#FF29BB"],f={fontSize:"4px",fontFamily:"sans-serif"};var E=function(e){var t=e.assets;return console.log(t),c.a.createElement("div",{className:"Chart"},c.a.createElement("section",{className:"Chart-list"},c.a.createElement(v.PieChart,{label:function(e){var t=e.dataEntry;return"\n          ".concat(t.title,"\n          ").concat(Math.round(t.percentage)," %\n          ")},labelStyle:Object(l.a)({},f),data:t.filter((function(e){return e.value})).map((function(e,t){return{title:e.type,value:e.value,color:p[t]}}))})))};var d=function(e){var t=e.tracker;return c.a.createElement("div",{className:"Tracker"},c.a.createElement("section",{className:"Tracker-list"},"".concat(t.name," (").concat(t.type,") - ").concat(t.amount,"x").concat(t.price," = ").concat(t.value)))};var b=function(e){var t=e.stocks,a=e.addTracker,r=Object(n.useState)(!1),o=Object(i.a)(r,2),l=o[0],u=o[1],s=Object(n.useState)(0),m=Object(i.a)(s,2),v=m[0],p=m[1],f=Object(n.useState)(""),E=Object(i.a)(f,2),b=E[0],g=E[1],h=Object(n.useState)(""),O=Object(i.a)(h,2),k=O[0],y=O[1];return c.a.createElement("div",{className:"Trackers"},c.a.createElement("header",{className:"Trackers-header"},"My Trackers"),c.a.createElement("section",{className:"Trackers-list"},t.map((function(e,t){return c.a.createElement(d,{tracker:e,key:t})}))),l?c.a.createElement("form",null,c.a.createElement("input",{type:"text",onChange:function(e){g(e.target.value.trim())},placeholder:"New Tracker listing",value:b}),c.a.createElement("input",{type:"text",onChange:function(e){p(Number(e.target.value.trim()))},placeholder:"Amount of shares",value:v}),c.a.createElement("select",{onChange:function(e){console.log(e.target.value.trim()),y(e.target.value.trim())},value:k},c.a.createElement("option",{value:"bond"},"bond"),c.a.createElement("option",{value:"gold"},"gold"),"\xa0",c.a.createElement("option",{value:"stock"},"stock")),c.a.createElement("div",{onClick:function(e){e.preventDefault(),b.length&&(a(b,v,k),p(0),g(""),y(""),u(!1))}},c.a.createElement("span",{role:"img","aria-label":"Confirm asset creation"},"\u2705")),c.a.createElement("div",{onClick:function(){return u(!1)}},c.a.createElement("span",{role:"img","aria-label":"Cancel asset creation"},"\u274c"))):c.a.createElement("div",{onClick:function(){return u(!0)}},c.a.createElement("span",{role:"img","aria-label":"Add new asset"}),"\u2795"))};var g=function(e){var t=e.name,a=e.value;return c.a.createElement("div",{className:"Account"},c.a.createElement("section",{className:"Account-list"},t," ",a))};var h=function(e){var t=e.accounts,a=e.addAccount,r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1],s=Object(n.useState)(0),m=Object(i.a)(s,2),v=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),d=E[0],b=E[1];return c.a.createElement("div",{className:"Accounts"},c.a.createElement("header",{className:"Accounts-header"},"My Accounts"),c.a.createElement("section",{className:"Accounts-list"},t.map((function(e,t){return c.a.createElement(g,{name:e.name,value:e.value,key:t})}))),d?c.a.createElement("form",null,c.a.createElement("input",{type:"text",onChange:function(e){u(e.target.value.trim())},placeholder:"Account name",value:l}),c.a.createElement("input",{type:"text",onChange:function(e){p(Number(e.target.value.trim()))},placeholder:"Account value",value:v}),c.a.createElement("div",{onClick:function(e){e.preventDefault(),l.length&&(a(l,v),p(0),u(""),b(!1))}},c.a.createElement("span",{role:"img","aria-label":"Confirm account creation"},"\u2705")),c.a.createElement("div",{onClick:function(){return b(!1)}},c.a.createElement("span",{role:"img","aria-label":"Close account creation"},"\u274c"))):c.a.createElement("div",{onClick:function(){return b(!0)}},c.a.createElement("span",{role:"img","aria-label":"Add new account"},"\u2795")))};var O=function(e){var t=e.updateApiKey,a=e.handleAPIKeyChange;return c.a.createElement("form",null,c.a.createElement("input",{type:"text",onChange:a,placeholder:"Your alphavantage API key"}),c.a.createElement("input",{type:"submit",onClick:t,value:"sub"}))};a(42);var k={};var y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],o=localStorage.getItem("bank_accounts")||"[]",s=Object(n.useState)(JSON.parse(o)),v=Object(i.a)(s,2),p=v[0],f=v[1],d=localStorage.getItem("stock_trackers")||"[]",g=Object(n.useState)(localStorage.getItem("alphavantage_api_key")),y=Object(i.a)(g,2),j=y[0],S=y[1],N=Object(n.useState)(JSON.parse(d)),A=Object(i.a)(N,2),C=A[0],w=A[1],F=Object(n.useState)(""),I=Object(i.a)(F,2),T=I[0],B=I[1];return Object(n.useEffect)((function(){for(var e=function(e){var t=C[e];k[t.name]||m.a.get("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(t.name,".L&apikey=").concat(j)).then((function(e){var a=e.data;console.log(a);var n=a["Global Quote"]["05. price"],c=function(e,t){var a=Number(t);return/^SGLN/.test(e)?a/100:a}(t.name,n),o=Object(l.a)(Object(l.a)({},t),{},{priceFromAPI:n,price:c,value:Math.round(100*(c*t.amount+Number.EPSILON))/100});if(console.log(o),r((function(e){return[].concat(Object(u.a)(e.filter((function(e){return e.name!==t.name}))),[o])})),!a&&a["Global Quote"])throw new Error("Possible API limit hit",JSON.stringify(a))})).catch(console.error),k[t.name]=!0},t=0;t<C.length;t++)e(t)})),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement(E,{assets:a.concat(p)}),c.a.createElement(h,{accounts:p,addAccount:function(e,t){var a=[].concat(Object(u.a)(p),[{name:e,value:t,type:"savings"}]);localStorage.setItem("bank_accounts",JSON.stringify(a)),f(a)}}),j?c.a.createElement(b,{stocks:a,addTracker:function(e,t,n){var c=[].concat(Object(u.a)(a),[{amount:t,name:e,type:n}]);localStorage.setItem("stock_trackers",JSON.stringify(c)),w(c),r(c)}}):c.a.createElement(O,{updateApiKey:function(e){e.preventDefault(),localStorage.setItem("alphavantage_api_key",T),S(T)},handleAPIKeyChange:function(e){return B(e.target.value.trim())}}),"Total portfolio value:"," ",a.reduce((function(e,t){return e+t.value}),0)+p.reduce((function(e,t){return e+t.value}),0)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.13d213de.chunk.js.map